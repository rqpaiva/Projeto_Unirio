<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Análise de Cancelamento de Corridas</title>
</head>
<body>
    <h1>Análise de Cancelamento de Corridas</h1>
    <p>Carregue os dados de um aplicativo de mobilidade urbana para realizar uma análise estatística das características das corridas.</p>

    <h3>Carregue seus dados:</h3>
    <input type="file" id="csvFile" accept=".csv">
    <button onclick="uploadCSV()">Carregar Dados</button>
    <p id="fileInfo"></p>
    
    <h3>Resultado da Análise</h3>
    <div id="analysisResult"></div>

    <script>
        function uploadCSV() {
            const fileInput = document.getElementById('csvFile');
            const file = fileInput.files[0];
            const reader = new FileReader();

            if (file) {
                reader.readAsText(file);
                reader.onload = function (e) {
                    const csvData = e.target.result;
                    document.getElementById('fileInfo').innerHTML = 'Arquivo carregado: ' + file.name;
                    
                    // URL da API a ser acessada
                    const apiUrl = 'https://seu-api-url-aqui';
                    
                    // Prefixo do proxy CORS Anywhere
                    const corsProxy = 'https://cors-anywhere.herokuapp.com/';
                    
                    // Fazer a solicitação HTTP via proxy CORS Anywhere
                    fetch(corsProxy + apiUrl, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ data: csvData })
                    })
                    .then(response => response.json())
                    .then(data => {
                        document.getElementById('analysisResult').innerHTML = 'Resultado da análise: ' + JSON.stringify(data);
                    })
                    .catch(error => {
                        console.error('Erro:', error);
                        document.getElementById('analysisResult').innerHTML = 'Erro ao carregar dados: ' + error;
                    });
                };
                reader.onerror = function (error) {
                    console.log('Erro na leitura do arquivo: ', error);
                };
            } else {
                document.getElementById('fileInfo').innerHTML = 'Nenhum arquivo selecionado.';
            }
        }
    </script>
</body>
</html>